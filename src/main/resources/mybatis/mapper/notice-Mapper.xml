<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.or.ddit.csc.not.service.impl.NoticeMapper">

	<select id="getList"
		resultType="kr.or.ddit.csc.not.service.NoticeVO" >
		SELECT * FROM (
		SELECT ROWNUM AS RNUM, B.*
		FROM (
		SELECT NOTICE_ID, NOTICE_TITLE, NOTICE_CONTENT, NOTICE_DEL_YN, NOTICE_CNT,
		NOTICE_CREATED_AT, NOTICE_UPDATED_AT
		FROM NOTICE
		<where>
			NOTICE_ID IS NOT NULL
			<if test="keyword != null and keyword != ''">
				AND NOTICE_CONTENT LIKE '%' || #{keyword} || '%'
			</if>
		</where>
		ORDER BY NOTICE_ID
		) B
		WHERE ROWNUM &lt;= #{endNo}
		)
		WHERE RNUM &gt;= #{startNo}
	</select>

	<select id="getNoticeDetail" parameterType="int"
		resultType="kr.or.ddit.csc.not.service.NoticeVO">
		SELECT *
		FROM NOTICE
		WHERE NOTICE_ID =#{no}
	</select>

	<select id="getAllNotice" parameterType="kr.or.ddit.csc.not.service.NoticeVO" resultType="int">
		SELECT COUNT(*)
		FROM NOTICE
		<where>
			NOTICE_ID IS NOT NULL
			<if test="keyword != null and keyword != ''">
				AND NOTICE_TITLE LIKE '%' || #{keyword} || '%'
			</if>
		</where>
	</select>

	<update id="upNoticeCnt" parameterType="int">
		UPDATE NOTICE
		SET
		NOTICE_CNT = notice_cnt+1
		WHERE NOTICE_ID=#{no}
	</update>

</mapper>